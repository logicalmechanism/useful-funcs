<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>AddressFuncs</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">useful-funcs-0</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Ancient Kraken 2022</td></tr><tr><th>License</th><td>GPL-3</td></tr><tr><th>Maintainer</th><td>logical.mechanism@protonmail.com</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">AddressFuncs</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A collection of tested on and off chain plutus address functions.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:checkValidMultisig">checkValidMultisig</a> :: TxInfo -&gt; [PubKeyHash] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:isAddrGettingPaidExactly">isAddrGettingPaidExactly</a> :: [TxOut] -&gt; Address -&gt; Value -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:isAddrHoldingToken">isAddrHoldingToken</a> :: [TxOut] -&gt; Address -&gt; CurrencySymbol -&gt; TokenName -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:createAddress">createAddress</a> :: PubKeyHash -&gt; PubKeyHash -&gt; Address</li><li class="src short"><a href="#v:isNInputs">isNInputs</a> :: [TxInInfo] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li><li class="src short"><a href="#v:isNOutputs">isNOutputs</a> :: [TxOut] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:checkValidMultisig" class="def">checkValidMultisig</a> :: TxInfo -&gt; [PubKeyHash] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:checkValidMultisig" class="selflink">#</a></p><div class="doc"><p>A simple multisig validation. Using the script context information, validate
 every public key hash signature. If the public key hash is a tx signer then
 increment the counter. At the end check if the number of signers is greater
 than or equal to some threshold integer. This assumes the list of public key hashes
 are known at the time of validation.</p><pre>checkValidMultisig scriptContextInfo listOfPkhs threshold
</pre><p>Testing: Test.Groups.Address</p></div></div><div class="top"><p class="src"><a id="v:isAddrGettingPaidExactly" class="def">isAddrGettingPaidExactly</a> :: [TxOut] -&gt; Address -&gt; Value -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:isAddrGettingPaidExactly" class="selflink">#</a></p><div class="doc"><p>Search a list of TxOut for TxOut with a specific address and value. This
 is a simple way to check if there exist an output utxo that has exactly
 some value and is being sent to a known address.</p><p>Testing: Test.Groups.Address</p></div></div><div class="top"><p class="src"><a id="v:isAddrHoldingToken" class="def">isAddrHoldingToken</a> :: [TxOut] -&gt; Address -&gt; CurrencySymbol -&gt; TokenName -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:isAddrHoldingToken" class="selflink">#</a></p><div class="doc"><p>Search a list of TxOut for a TxOut with a specific address that is hodling
 an exact amount of of a singular token. This is a great function when only
 a token is known but not the minimum amount of ada that is travelling
 with that token during a transaction.</p><p>Testing: Test.Groups.Address</p></div></div><div class="top"><p class="src"><a id="v:createAddress" class="def">createAddress</a> :: PubKeyHash -&gt; PubKeyHash -&gt; Address <a href="#v:createAddress" class="selflink">#</a></p><div class="doc"><p>Create a proper Address type. A transaction can input only the public
 key hash of some wallet. This applies for payment and staking. Inside
 plutus an address is a combination of both pkhs and is not bech32. The
 function accounts for both types of addresses. Not to be used with 
 validator hashes.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>createAddress &quot;acab&quot; &quot;&quot;
</code></strong>Address {addressCredential = PubKeyCredential acab, addressStakingCredential = Nothing}
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>createAddress &quot;acab&quot; &quot;beef&quot;
</code></strong>Address {addressCredential = PubKeyCredential acab, addressStakingCredential = Just (StakingHash (PubKeyCredential beef))}
</pre><p>Testing: Test.Groups.Address</p></div></div><div class="top"><p class="src"><a id="v:isNInputs" class="def">isNInputs</a> :: [TxInInfo] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:isNInputs" class="selflink">#</a></p><div class="doc"><p>Count the number of inputs that have datums of any kind. A script input is
 spendable if and only if it has some kind of datum, either embedded or inline.
 Thus limiting the number of script inputs is simply limiting the number of
 inputs that have some type of datum.</p><p>Testing: Test.Groups.Address</p></div></div><div class="top"><p class="src"><a id="v:isNOutputs" class="def">isNOutputs</a> :: [TxOut] -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Integer" title="Distribution.Compat.Prelude.Internal">Integer</a> -&gt; <a href="file:///home/logic/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/Cabal-3.2.1.0/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:isNOutputs" class="selflink">#</a></p><div class="doc"><p>Count the number of outputs that have datums of any kind. This is great at
 limiting the number of outputs in a transaction that can have datums. An example
 is looking an outputs coming back to the script.</p><p>Testing: Test.Groups.Address</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>